{% extends 'base.html' %}

{% block title %}Add - {% endblock %}

{% block content %}
    <h2 class="title is-2">Add</h1>

    <form action="/add-from-deviantart" method="POST" class="add-stuffs box">
        <h3 class="title is-3">Add from DeviantArt</h3>
        
        <div class="field">
            <p class="control">
                <input type="url" name="deviant-art-url" placeholder="http://myxton.deviantart.com/art/Shani-618208316" class="input" required>
            </p>
        </div>

        <div class="field">
            <p class="control">
                <label class="checkbox">
                {% raw %}
                    <input type="checkbox" name="existing-artist" @click="disabled = !disabled">
                    Use Existing Artist (Otherwise the artist will be created for you)
                {% endraw %}
                </label>
            </p>
        </div>

        <div class="field">
            <p class="control">
                <span class="select">
                    <select name="artist-id" :disabled="disabled" required>
                        {% raw %}
                        <option v-for="artist in artists" :value="artist.id">
                            {{ artist.name }}
                        </option>
                        {% endraw %}
                    </select>
                </span>
            </p>
        </div>


        <input type="submit" value="Add Art" class="button">
    </form>

    <script>
    var addStuffsVueInstance = new Vue({
        el: '.add-stuffs',

        data: {
            artists: [],
            tags: [],
            disabled: true
        },

        mounted() {
            fetch('/artist/all').then((response) => {
                return response.json()
            }).then((artists) => {
                this.artists = artists
            })
            fetch('/tag/all').then((response) => {
                return response.json()
            }).then((tags) => {
                this.tags = tags
            })
        }
    })
    </script>
{% endblock %}